
<!doctype html>
<html lang="en">

<head>
    <title>Code coverage report for custom_game_engine/packages/core/src/systems/SleepSystem.ts</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../../../../prettify.css" />
    <link rel="stylesheet" href="../../../../../base.css" />
    <link rel="shortcut icon" type="image/x-icon" href="../../../../../favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../../../../sort-arrow-sprite.png);
        }
    </style>
</head>
    
<body>
<div class='wrapper'>
    <div class='pad1'>
        <h1><a href="../../../../../index.html">All files</a> / <a href="index.html">custom_game_engine/packages/core/src/systems</a> SleepSystem.ts</h1>
        <div class='clearfix'>
            
            <div class='fl pad1y space-right2'>
                <span class="strong">14.33% </span>
                <span class="quiet">Statements</span>
                <span class='fraction'>38/265</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">0% </span>
                <span class="quiet">Branches</span>
                <span class='fraction'>0/1</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">0% </span>
                <span class="quiet">Functions</span>
                <span class='fraction'>0/8</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">14.33% </span>
                <span class="quiet">Lines</span>
                <span class='fraction'>38/265</span>
            </div>
        
            
        </div>
        <p class="quiet">
            Press <em>n</em> or <em>j</em> to go to the next uncovered block, <em>b</em>, <em>p</em> or <em>k</em> for the previous block.
        </p>
        <template id="filterTemplate">
            <div class="quiet">
                Filter:
                <input type="search" id="fileSearch">
            </div>
        </template>
    </div>
    <div class='status-line low'></div>
    <pre><table class="coverage">
<tr><td class="line-count quiet"><a name='L1'></a><a href='#L1'>1</a>
<a name='L2'></a><a href='#L2'>2</a>
<a name='L3'></a><a href='#L3'>3</a>
<a name='L4'></a><a href='#L4'>4</a>
<a name='L5'></a><a href='#L5'>5</a>
<a name='L6'></a><a href='#L6'>6</a>
<a name='L7'></a><a href='#L7'>7</a>
<a name='L8'></a><a href='#L8'>8</a>
<a name='L9'></a><a href='#L9'>9</a>
<a name='L10'></a><a href='#L10'>10</a>
<a name='L11'></a><a href='#L11'>11</a>
<a name='L12'></a><a href='#L12'>12</a>
<a name='L13'></a><a href='#L13'>13</a>
<a name='L14'></a><a href='#L14'>14</a>
<a name='L15'></a><a href='#L15'>15</a>
<a name='L16'></a><a href='#L16'>16</a>
<a name='L17'></a><a href='#L17'>17</a>
<a name='L18'></a><a href='#L18'>18</a>
<a name='L19'></a><a href='#L19'>19</a>
<a name='L20'></a><a href='#L20'>20</a>
<a name='L21'></a><a href='#L21'>21</a>
<a name='L22'></a><a href='#L22'>22</a>
<a name='L23'></a><a href='#L23'>23</a>
<a name='L24'></a><a href='#L24'>24</a>
<a name='L25'></a><a href='#L25'>25</a>
<a name='L26'></a><a href='#L26'>26</a>
<a name='L27'></a><a href='#L27'>27</a>
<a name='L28'></a><a href='#L28'>28</a>
<a name='L29'></a><a href='#L29'>29</a>
<a name='L30'></a><a href='#L30'>30</a>
<a name='L31'></a><a href='#L31'>31</a>
<a name='L32'></a><a href='#L32'>32</a>
<a name='L33'></a><a href='#L33'>33</a>
<a name='L34'></a><a href='#L34'>34</a>
<a name='L35'></a><a href='#L35'>35</a>
<a name='L36'></a><a href='#L36'>36</a>
<a name='L37'></a><a href='#L37'>37</a>
<a name='L38'></a><a href='#L38'>38</a>
<a name='L39'></a><a href='#L39'>39</a>
<a name='L40'></a><a href='#L40'>40</a>
<a name='L41'></a><a href='#L41'>41</a>
<a name='L42'></a><a href='#L42'>42</a>
<a name='L43'></a><a href='#L43'>43</a>
<a name='L44'></a><a href='#L44'>44</a>
<a name='L45'></a><a href='#L45'>45</a>
<a name='L46'></a><a href='#L46'>46</a>
<a name='L47'></a><a href='#L47'>47</a>
<a name='L48'></a><a href='#L48'>48</a>
<a name='L49'></a><a href='#L49'>49</a>
<a name='L50'></a><a href='#L50'>50</a>
<a name='L51'></a><a href='#L51'>51</a>
<a name='L52'></a><a href='#L52'>52</a>
<a name='L53'></a><a href='#L53'>53</a>
<a name='L54'></a><a href='#L54'>54</a>
<a name='L55'></a><a href='#L55'>55</a>
<a name='L56'></a><a href='#L56'>56</a>
<a name='L57'></a><a href='#L57'>57</a>
<a name='L58'></a><a href='#L58'>58</a>
<a name='L59'></a><a href='#L59'>59</a>
<a name='L60'></a><a href='#L60'>60</a>
<a name='L61'></a><a href='#L61'>61</a>
<a name='L62'></a><a href='#L62'>62</a>
<a name='L63'></a><a href='#L63'>63</a>
<a name='L64'></a><a href='#L64'>64</a>
<a name='L65'></a><a href='#L65'>65</a>
<a name='L66'></a><a href='#L66'>66</a>
<a name='L67'></a><a href='#L67'>67</a>
<a name='L68'></a><a href='#L68'>68</a>
<a name='L69'></a><a href='#L69'>69</a>
<a name='L70'></a><a href='#L70'>70</a>
<a name='L71'></a><a href='#L71'>71</a>
<a name='L72'></a><a href='#L72'>72</a>
<a name='L73'></a><a href='#L73'>73</a>
<a name='L74'></a><a href='#L74'>74</a>
<a name='L75'></a><a href='#L75'>75</a>
<a name='L76'></a><a href='#L76'>76</a>
<a name='L77'></a><a href='#L77'>77</a>
<a name='L78'></a><a href='#L78'>78</a>
<a name='L79'></a><a href='#L79'>79</a>
<a name='L80'></a><a href='#L80'>80</a>
<a name='L81'></a><a href='#L81'>81</a>
<a name='L82'></a><a href='#L82'>82</a>
<a name='L83'></a><a href='#L83'>83</a>
<a name='L84'></a><a href='#L84'>84</a>
<a name='L85'></a><a href='#L85'>85</a>
<a name='L86'></a><a href='#L86'>86</a>
<a name='L87'></a><a href='#L87'>87</a>
<a name='L88'></a><a href='#L88'>88</a>
<a name='L89'></a><a href='#L89'>89</a>
<a name='L90'></a><a href='#L90'>90</a>
<a name='L91'></a><a href='#L91'>91</a>
<a name='L92'></a><a href='#L92'>92</a>
<a name='L93'></a><a href='#L93'>93</a>
<a name='L94'></a><a href='#L94'>94</a>
<a name='L95'></a><a href='#L95'>95</a>
<a name='L96'></a><a href='#L96'>96</a>
<a name='L97'></a><a href='#L97'>97</a>
<a name='L98'></a><a href='#L98'>98</a>
<a name='L99'></a><a href='#L99'>99</a>
<a name='L100'></a><a href='#L100'>100</a>
<a name='L101'></a><a href='#L101'>101</a>
<a name='L102'></a><a href='#L102'>102</a>
<a name='L103'></a><a href='#L103'>103</a>
<a name='L104'></a><a href='#L104'>104</a>
<a name='L105'></a><a href='#L105'>105</a>
<a name='L106'></a><a href='#L106'>106</a>
<a name='L107'></a><a href='#L107'>107</a>
<a name='L108'></a><a href='#L108'>108</a>
<a name='L109'></a><a href='#L109'>109</a>
<a name='L110'></a><a href='#L110'>110</a>
<a name='L111'></a><a href='#L111'>111</a>
<a name='L112'></a><a href='#L112'>112</a>
<a name='L113'></a><a href='#L113'>113</a>
<a name='L114'></a><a href='#L114'>114</a>
<a name='L115'></a><a href='#L115'>115</a>
<a name='L116'></a><a href='#L116'>116</a>
<a name='L117'></a><a href='#L117'>117</a>
<a name='L118'></a><a href='#L118'>118</a>
<a name='L119'></a><a href='#L119'>119</a>
<a name='L120'></a><a href='#L120'>120</a>
<a name='L121'></a><a href='#L121'>121</a>
<a name='L122'></a><a href='#L122'>122</a>
<a name='L123'></a><a href='#L123'>123</a>
<a name='L124'></a><a href='#L124'>124</a>
<a name='L125'></a><a href='#L125'>125</a>
<a name='L126'></a><a href='#L126'>126</a>
<a name='L127'></a><a href='#L127'>127</a>
<a name='L128'></a><a href='#L128'>128</a>
<a name='L129'></a><a href='#L129'>129</a>
<a name='L130'></a><a href='#L130'>130</a>
<a name='L131'></a><a href='#L131'>131</a>
<a name='L132'></a><a href='#L132'>132</a>
<a name='L133'></a><a href='#L133'>133</a>
<a name='L134'></a><a href='#L134'>134</a>
<a name='L135'></a><a href='#L135'>135</a>
<a name='L136'></a><a href='#L136'>136</a>
<a name='L137'></a><a href='#L137'>137</a>
<a name='L138'></a><a href='#L138'>138</a>
<a name='L139'></a><a href='#L139'>139</a>
<a name='L140'></a><a href='#L140'>140</a>
<a name='L141'></a><a href='#L141'>141</a>
<a name='L142'></a><a href='#L142'>142</a>
<a name='L143'></a><a href='#L143'>143</a>
<a name='L144'></a><a href='#L144'>144</a>
<a name='L145'></a><a href='#L145'>145</a>
<a name='L146'></a><a href='#L146'>146</a>
<a name='L147'></a><a href='#L147'>147</a>
<a name='L148'></a><a href='#L148'>148</a>
<a name='L149'></a><a href='#L149'>149</a>
<a name='L150'></a><a href='#L150'>150</a>
<a name='L151'></a><a href='#L151'>151</a>
<a name='L152'></a><a href='#L152'>152</a>
<a name='L153'></a><a href='#L153'>153</a>
<a name='L154'></a><a href='#L154'>154</a>
<a name='L155'></a><a href='#L155'>155</a>
<a name='L156'></a><a href='#L156'>156</a>
<a name='L157'></a><a href='#L157'>157</a>
<a name='L158'></a><a href='#L158'>158</a>
<a name='L159'></a><a href='#L159'>159</a>
<a name='L160'></a><a href='#L160'>160</a>
<a name='L161'></a><a href='#L161'>161</a>
<a name='L162'></a><a href='#L162'>162</a>
<a name='L163'></a><a href='#L163'>163</a>
<a name='L164'></a><a href='#L164'>164</a>
<a name='L165'></a><a href='#L165'>165</a>
<a name='L166'></a><a href='#L166'>166</a>
<a name='L167'></a><a href='#L167'>167</a>
<a name='L168'></a><a href='#L168'>168</a>
<a name='L169'></a><a href='#L169'>169</a>
<a name='L170'></a><a href='#L170'>170</a>
<a name='L171'></a><a href='#L171'>171</a>
<a name='L172'></a><a href='#L172'>172</a>
<a name='L173'></a><a href='#L173'>173</a>
<a name='L174'></a><a href='#L174'>174</a>
<a name='L175'></a><a href='#L175'>175</a>
<a name='L176'></a><a href='#L176'>176</a>
<a name='L177'></a><a href='#L177'>177</a>
<a name='L178'></a><a href='#L178'>178</a>
<a name='L179'></a><a href='#L179'>179</a>
<a name='L180'></a><a href='#L180'>180</a>
<a name='L181'></a><a href='#L181'>181</a>
<a name='L182'></a><a href='#L182'>182</a>
<a name='L183'></a><a href='#L183'>183</a>
<a name='L184'></a><a href='#L184'>184</a>
<a name='L185'></a><a href='#L185'>185</a>
<a name='L186'></a><a href='#L186'>186</a>
<a name='L187'></a><a href='#L187'>187</a>
<a name='L188'></a><a href='#L188'>188</a>
<a name='L189'></a><a href='#L189'>189</a>
<a name='L190'></a><a href='#L190'>190</a>
<a name='L191'></a><a href='#L191'>191</a>
<a name='L192'></a><a href='#L192'>192</a>
<a name='L193'></a><a href='#L193'>193</a>
<a name='L194'></a><a href='#L194'>194</a>
<a name='L195'></a><a href='#L195'>195</a>
<a name='L196'></a><a href='#L196'>196</a>
<a name='L197'></a><a href='#L197'>197</a>
<a name='L198'></a><a href='#L198'>198</a>
<a name='L199'></a><a href='#L199'>199</a>
<a name='L200'></a><a href='#L200'>200</a>
<a name='L201'></a><a href='#L201'>201</a>
<a name='L202'></a><a href='#L202'>202</a>
<a name='L203'></a><a href='#L203'>203</a>
<a name='L204'></a><a href='#L204'>204</a>
<a name='L205'></a><a href='#L205'>205</a>
<a name='L206'></a><a href='#L206'>206</a>
<a name='L207'></a><a href='#L207'>207</a>
<a name='L208'></a><a href='#L208'>208</a>
<a name='L209'></a><a href='#L209'>209</a>
<a name='L210'></a><a href='#L210'>210</a>
<a name='L211'></a><a href='#L211'>211</a>
<a name='L212'></a><a href='#L212'>212</a>
<a name='L213'></a><a href='#L213'>213</a>
<a name='L214'></a><a href='#L214'>214</a>
<a name='L215'></a><a href='#L215'>215</a>
<a name='L216'></a><a href='#L216'>216</a>
<a name='L217'></a><a href='#L217'>217</a>
<a name='L218'></a><a href='#L218'>218</a>
<a name='L219'></a><a href='#L219'>219</a>
<a name='L220'></a><a href='#L220'>220</a>
<a name='L221'></a><a href='#L221'>221</a>
<a name='L222'></a><a href='#L222'>222</a>
<a name='L223'></a><a href='#L223'>223</a>
<a name='L224'></a><a href='#L224'>224</a>
<a name='L225'></a><a href='#L225'>225</a>
<a name='L226'></a><a href='#L226'>226</a>
<a name='L227'></a><a href='#L227'>227</a>
<a name='L228'></a><a href='#L228'>228</a>
<a name='L229'></a><a href='#L229'>229</a>
<a name='L230'></a><a href='#L230'>230</a>
<a name='L231'></a><a href='#L231'>231</a>
<a name='L232'></a><a href='#L232'>232</a>
<a name='L233'></a><a href='#L233'>233</a>
<a name='L234'></a><a href='#L234'>234</a>
<a name='L235'></a><a href='#L235'>235</a>
<a name='L236'></a><a href='#L236'>236</a>
<a name='L237'></a><a href='#L237'>237</a>
<a name='L238'></a><a href='#L238'>238</a>
<a name='L239'></a><a href='#L239'>239</a>
<a name='L240'></a><a href='#L240'>240</a>
<a name='L241'></a><a href='#L241'>241</a>
<a name='L242'></a><a href='#L242'>242</a>
<a name='L243'></a><a href='#L243'>243</a>
<a name='L244'></a><a href='#L244'>244</a>
<a name='L245'></a><a href='#L245'>245</a>
<a name='L246'></a><a href='#L246'>246</a>
<a name='L247'></a><a href='#L247'>247</a>
<a name='L248'></a><a href='#L248'>248</a>
<a name='L249'></a><a href='#L249'>249</a>
<a name='L250'></a><a href='#L250'>250</a>
<a name='L251'></a><a href='#L251'>251</a>
<a name='L252'></a><a href='#L252'>252</a>
<a name='L253'></a><a href='#L253'>253</a>
<a name='L254'></a><a href='#L254'>254</a>
<a name='L255'></a><a href='#L255'>255</a>
<a name='L256'></a><a href='#L256'>256</a>
<a name='L257'></a><a href='#L257'>257</a>
<a name='L258'></a><a href='#L258'>258</a>
<a name='L259'></a><a href='#L259'>259</a>
<a name='L260'></a><a href='#L260'>260</a>
<a name='L261'></a><a href='#L261'>261</a>
<a name='L262'></a><a href='#L262'>262</a>
<a name='L263'></a><a href='#L263'>263</a>
<a name='L264'></a><a href='#L264'>264</a>
<a name='L265'></a><a href='#L265'>265</a>
<a name='L266'></a><a href='#L266'>266</a>
<a name='L267'></a><a href='#L267'>267</a>
<a name='L268'></a><a href='#L268'>268</a>
<a name='L269'></a><a href='#L269'>269</a>
<a name='L270'></a><a href='#L270'>270</a>
<a name='L271'></a><a href='#L271'>271</a>
<a name='L272'></a><a href='#L272'>272</a>
<a name='L273'></a><a href='#L273'>273</a>
<a name='L274'></a><a href='#L274'>274</a>
<a name='L275'></a><a href='#L275'>275</a>
<a name='L276'></a><a href='#L276'>276</a>
<a name='L277'></a><a href='#L277'>277</a>
<a name='L278'></a><a href='#L278'>278</a>
<a name='L279'></a><a href='#L279'>279</a>
<a name='L280'></a><a href='#L280'>280</a>
<a name='L281'></a><a href='#L281'>281</a>
<a name='L282'></a><a href='#L282'>282</a>
<a name='L283'></a><a href='#L283'>283</a>
<a name='L284'></a><a href='#L284'>284</a>
<a name='L285'></a><a href='#L285'>285</a>
<a name='L286'></a><a href='#L286'>286</a>
<a name='L287'></a><a href='#L287'>287</a>
<a name='L288'></a><a href='#L288'>288</a>
<a name='L289'></a><a href='#L289'>289</a>
<a name='L290'></a><a href='#L290'>290</a>
<a name='L291'></a><a href='#L291'>291</a>
<a name='L292'></a><a href='#L292'>292</a>
<a name='L293'></a><a href='#L293'>293</a>
<a name='L294'></a><a href='#L294'>294</a>
<a name='L295'></a><a href='#L295'>295</a>
<a name='L296'></a><a href='#L296'>296</a>
<a name='L297'></a><a href='#L297'>297</a>
<a name='L298'></a><a href='#L298'>298</a>
<a name='L299'></a><a href='#L299'>299</a>
<a name='L300'></a><a href='#L300'>300</a>
<a name='L301'></a><a href='#L301'>301</a>
<a name='L302'></a><a href='#L302'>302</a>
<a name='L303'></a><a href='#L303'>303</a>
<a name='L304'></a><a href='#L304'>304</a>
<a name='L305'></a><a href='#L305'>305</a>
<a name='L306'></a><a href='#L306'>306</a>
<a name='L307'></a><a href='#L307'>307</a>
<a name='L308'></a><a href='#L308'>308</a>
<a name='L309'></a><a href='#L309'>309</a>
<a name='L310'></a><a href='#L310'>310</a>
<a name='L311'></a><a href='#L311'>311</a>
<a name='L312'></a><a href='#L312'>312</a>
<a name='L313'></a><a href='#L313'>313</a>
<a name='L314'></a><a href='#L314'>314</a>
<a name='L315'></a><a href='#L315'>315</a>
<a name='L316'></a><a href='#L316'>316</a>
<a name='L317'></a><a href='#L317'>317</a>
<a name='L318'></a><a href='#L318'>318</a>
<a name='L319'></a><a href='#L319'>319</a>
<a name='L320'></a><a href='#L320'>320</a>
<a name='L321'></a><a href='#L321'>321</a>
<a name='L322'></a><a href='#L322'>322</a>
<a name='L323'></a><a href='#L323'>323</a>
<a name='L324'></a><a href='#L324'>324</a>
<a name='L325'></a><a href='#L325'>325</a>
<a name='L326'></a><a href='#L326'>326</a>
<a name='L327'></a><a href='#L327'>327</a>
<a name='L328'></a><a href='#L328'>328</a>
<a name='L329'></a><a href='#L329'>329</a>
<a name='L330'></a><a href='#L330'>330</a>
<a name='L331'></a><a href='#L331'>331</a>
<a name='L332'></a><a href='#L332'>332</a>
<a name='L333'></a><a href='#L333'>333</a>
<a name='L334'></a><a href='#L334'>334</a>
<a name='L335'></a><a href='#L335'>335</a>
<a name='L336'></a><a href='#L336'>336</a>
<a name='L337'></a><a href='#L337'>337</a>
<a name='L338'></a><a href='#L338'>338</a>
<a name='L339'></a><a href='#L339'>339</a>
<a name='L340'></a><a href='#L340'>340</a>
<a name='L341'></a><a href='#L341'>341</a>
<a name='L342'></a><a href='#L342'>342</a>
<a name='L343'></a><a href='#L343'>343</a>
<a name='L344'></a><a href='#L344'>344</a>
<a name='L345'></a><a href='#L345'>345</a>
<a name='L346'></a><a href='#L346'>346</a>
<a name='L347'></a><a href='#L347'>347</a>
<a name='L348'></a><a href='#L348'>348</a>
<a name='L349'></a><a href='#L349'>349</a>
<a name='L350'></a><a href='#L350'>350</a>
<a name='L351'></a><a href='#L351'>351</a>
<a name='L352'></a><a href='#L352'>352</a>
<a name='L353'></a><a href='#L353'>353</a>
<a name='L354'></a><a href='#L354'>354</a>
<a name='L355'></a><a href='#L355'>355</a>
<a name='L356'></a><a href='#L356'>356</a>
<a name='L357'></a><a href='#L357'>357</a>
<a name='L358'></a><a href='#L358'>358</a>
<a name='L359'></a><a href='#L359'>359</a>
<a name='L360'></a><a href='#L360'>360</a>
<a name='L361'></a><a href='#L361'>361</a>
<a name='L362'></a><a href='#L362'>362</a>
<a name='L363'></a><a href='#L363'>363</a>
<a name='L364'></a><a href='#L364'>364</a>
<a name='L365'></a><a href='#L365'>365</a>
<a name='L366'></a><a href='#L366'>366</a>
<a name='L367'></a><a href='#L367'>367</a>
<a name='L368'></a><a href='#L368'>368</a>
<a name='L369'></a><a href='#L369'>369</a>
<a name='L370'></a><a href='#L370'>370</a>
<a name='L371'></a><a href='#L371'>371</a>
<a name='L372'></a><a href='#L372'>372</a>
<a name='L373'></a><a href='#L373'>373</a>
<a name='L374'></a><a href='#L374'>374</a>
<a name='L375'></a><a href='#L375'>375</a>
<a name='L376'></a><a href='#L376'>376</a>
<a name='L377'></a><a href='#L377'>377</a>
<a name='L378'></a><a href='#L378'>378</a>
<a name='L379'></a><a href='#L379'>379</a>
<a name='L380'></a><a href='#L380'>380</a>
<a name='L381'></a><a href='#L381'>381</a>
<a name='L382'></a><a href='#L382'>382</a>
<a name='L383'></a><a href='#L383'>383</a>
<a name='L384'></a><a href='#L384'>384</a>
<a name='L385'></a><a href='#L385'>385</a>
<a name='L386'></a><a href='#L386'>386</a>
<a name='L387'></a><a href='#L387'>387</a>
<a name='L388'></a><a href='#L388'>388</a>
<a name='L389'></a><a href='#L389'>389</a>
<a name='L390'></a><a href='#L390'>390</a>
<a name='L391'></a><a href='#L391'>391</a>
<a name='L392'></a><a href='#L392'>392</a>
<a name='L393'></a><a href='#L393'>393</a>
<a name='L394'></a><a href='#L394'>394</a>
<a name='L395'></a><a href='#L395'>395</a>
<a name='L396'></a><a href='#L396'>396</a>
<a name='L397'></a><a href='#L397'>397</a>
<a name='L398'></a><a href='#L398'>398</a>
<a name='L399'></a><a href='#L399'>399</a>
<a name='L400'></a><a href='#L400'>400</a>
<a name='L401'></a><a href='#L401'>401</a>
<a name='L402'></a><a href='#L402'>402</a>
<a name='L403'></a><a href='#L403'>403</a>
<a name='L404'></a><a href='#L404'>404</a>
<a name='L405'></a><a href='#L405'>405</a>
<a name='L406'></a><a href='#L406'>406</a>
<a name='L407'></a><a href='#L407'>407</a>
<a name='L408'></a><a href='#L408'>408</a>
<a name='L409'></a><a href='#L409'>409</a>
<a name='L410'></a><a href='#L410'>410</a>
<a name='L411'></a><a href='#L411'>411</a>
<a name='L412'></a><a href='#L412'>412</a>
<a name='L413'></a><a href='#L413'>413</a>
<a name='L414'></a><a href='#L414'>414</a>
<a name='L415'></a><a href='#L415'>415</a>
<a name='L416'></a><a href='#L416'>416</a>
<a name='L417'></a><a href='#L417'>417</a>
<a name='L418'></a><a href='#L418'>418</a>
<a name='L419'></a><a href='#L419'>419</a>
<a name='L420'></a><a href='#L420'>420</a>
<a name='L421'></a><a href='#L421'>421</a>
<a name='L422'></a><a href='#L422'>422</a>
<a name='L423'></a><a href='#L423'>423</a>
<a name='L424'></a><a href='#L424'>424</a>
<a name='L425'></a><a href='#L425'>425</a>
<a name='L426'></a><a href='#L426'>426</a>
<a name='L427'></a><a href='#L427'>427</a>
<a name='L428'></a><a href='#L428'>428</a>
<a name='L429'></a><a href='#L429'>429</a>
<a name='L430'></a><a href='#L430'>430</a>
<a name='L431'></a><a href='#L431'>431</a>
<a name='L432'></a><a href='#L432'>432</a>
<a name='L433'></a><a href='#L433'>433</a>
<a name='L434'></a><a href='#L434'>434</a>
<a name='L435'></a><a href='#L435'>435</a>
<a name='L436'></a><a href='#L436'>436</a>
<a name='L437'></a><a href='#L437'>437</a>
<a name='L438'></a><a href='#L438'>438</a>
<a name='L439'></a><a href='#L439'>439</a>
<a name='L440'></a><a href='#L440'>440</a>
<a name='L441'></a><a href='#L441'>441</a>
<a name='L442'></a><a href='#L442'>442</a></td><td class="line-coverage quiet"><span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">import { BaseSystem, type SystemContext } from '../ecs/SystemContext.js';
import type { ComponentType } from '../types.js';
import { ComponentType as CT } from '../types/ComponentType.js';
import { BuildingType as BT } from '../types/BuildingType.js';
import type { World } from '../ecs/World.js';
import { EntityImpl, type Entity } from '../ecs/Entity.js';
import type { EventBus } from '../events/EventBus.js';
import type { CircadianComponent, DreamContent } from '../components/CircadianComponent.js';
import type { NeedsComponent } from '../components/NeedsComponent.js';
import type { AgentComponent } from '../components/AgentComponent.js';
import type { TimeComponent } from './TimeSystem.js';
import type { EpisodicMemory } from '../components/EpisodicMemoryComponent.js';
import { getAgent, getNeeds, getCircadian, getEpisodicMemory, getBuilding } from '../utils/componentHelpers.js';
import type { BuildingHarmonyComponent } from '../components/BuildingHarmonyComponent.js';
import { getHarmonyRestModifier } from '../components/BuildingHarmonyComponent.js';
import { setMutationRate, clearMutationRate } from '../components/MutationVectorComponent.js';
&nbsp;
/**
 * Weird/surreal elements that can appear in dreams
 */
const WEIRD_DREAM_ELEMENTS = [
  'everything was made of water',
  'the sky was underground',
  'trees were walking and talking',
  'time was flowing backwards',
  'gravity kept reversing',
  'everyone had multiple faces',
  'the ground was transparent like glass',
  'colors were sounds and sounds were colors',
  'buildings were breathing',
  'the moon was following you',
  'your hands kept multiplying',
  'words were floating in the air like butterflies',
  'everything was upside down but felt normal',
  'you could see through walls',
  'the sun was cold and ice was hot',
  'shadows moved independently',
  'you were simultaneously in multiple places',
  'objects kept transforming into other things',
  'you could taste emotions',
  'the world was in black and white except for one color',
  'you were tiny like an ant',
  'you were giant and everything else was tiny',
  'you were swimming through the air',
  'everyone was speaking in reverse',
  'you had wings but couldn\'t fly',
];
&nbsp;
/**
 * SleepSystem manages agent sleep behavior, energy recovery, and circadian rhythms
 *
 * Responsibilities:
 * - Update sleep drive based on time awake/asleep
 * - Recover energy during sleep
 * - Apply sleep quality modifiers
 * - Handle wake conditions
 */
export class SleepSystem extends BaseSystem {
  public readonly <span class="fstat-no" title="function not covered" ><span class="branch-0 cbranch-no" title="branch not covered" >id = 'sleep' as const;</span></span>
<span class="cstat-no" title="statement not covered" >  public readonly priority = 12; // After Needs (priority 15), before Memory (100)</span>
<span class="cstat-no" title="statement not covered" >  public readonly requiredComponents = [CT.Circadian, CT.Needs] as const;</span>
  // Only run when circadian components exist (O(1) activation check)
<span class="cstat-no" title="statement not covered" >  public readonly activationComponents = ['circadian'] as const;</span>
<span class="cstat-no" title="statement not covered" >  protected readonly throttleInterval = 20; // NORMAL - 1 second</span>
&nbsp;
  /**
   * Systems that must run before this one.
   * @see StateMutatorSystem - handles batched sleep drive and energy recovery
   */
<span class="cstat-no" title="statement not covered" >  public readonly dependsOn = ['state_mutator'] as const;</span>
&nbsp;
  // Singleton entity caching
<span class="cstat-no" title="statement not covered" >  private timeEntityId: string | null = null;</span>
&nbsp;
  protected <span class="fstat-no" title="function not covered" >onUpdate(ctx: SystemContext): void {</span>
    // Get time component from world entity (cached singleton)
<span class="cstat-no" title="statement not covered" >    if (!this.timeEntityId) {</span>
<span class="cstat-no" title="statement not covered" >      const timeEntities = ctx.world.query().with(CT.Time).executeEntities();</span>
<span class="cstat-no" title="statement not covered" >      if (timeEntities.length === 0) return;</span>
<span class="cstat-no" title="statement not covered" >      const firstEntity = timeEntities[0];</span>
<span class="cstat-no" title="statement not covered" >      if (!firstEntity) return;</span>
<span class="cstat-no" title="statement not covered" >      this.timeEntityId = firstEntity.id;</span>
<span class="cstat-no" title="statement not covered" >    }</span>
<span class="cstat-no" title="statement not covered" >    const timeEntity = ctx.world.getEntity(this.timeEntityId) as EntityImpl | undefined;</span>
<span class="cstat-no" title="statement not covered" >    if (!timeEntity) {</span>
<span class="cstat-no" title="statement not covered" >      this.timeEntityId = null; // Reset cache if entity disappeared</span>
<span class="cstat-no" title="statement not covered" >      return;</span>
<span class="cstat-no" title="statement not covered" >    }</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    let timeOfDay = 12; // Default noon if no time component</span>
<span class="cstat-no" title="statement not covered" >    let hoursElapsed = 0;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    const timeComp = timeEntity.getComponent&lt;TimeComponent&gt;(CT.Time);</span>
<span class="cstat-no" title="statement not covered" >    if (timeComp) {</span>
<span class="cstat-no" title="statement not covered" >      timeOfDay = timeComp.timeOfDay;</span>
      // Calculate effective day length based on speed multiplier
      // This ensures sleep drive accumulates correctly at different time speeds
<span class="cstat-no" title="statement not covered" >      const effectiveDayLength = timeComp.dayLength / timeComp.speedMultiplier;</span>
      // Calculate hours elapsed based on deltaTime and effective day length
<span class="cstat-no" title="statement not covered" >      hoursElapsed = (ctx.deltaTime / effectiveDayLength) * 24;</span>
<span class="cstat-no" title="statement not covered" >    }</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    for (const entity of ctx.activeEntities) {</span>
<span class="cstat-no" title="statement not covered" >      const circadian = getCircadian(entity);</span>
<span class="cstat-no" title="statement not covered" >      const needs = getNeeds(entity);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >      if (!circadian || !needs) continue;</span>
&nbsp;
      // Update mutation rates for sleep drive and energy recovery
<span class="cstat-no" title="statement not covered" >      this.updateSleepMutations(entity, circadian, needs, timeOfDay);</span>
&nbsp;
      // Process sleep (discrete events: dreams, wake checks)
<span class="cstat-no" title="statement not covered" >      if (circadian.isSleeping) {</span>
<span class="cstat-no" title="statement not covered" >        this.processSleep(entity, circadian, needs, hoursElapsed, ctx.world);</span>
<span class="cstat-no" title="statement not covered" >      }</span>
<span class="cstat-no" title="statement not covered" >    }</span>
<span class="cstat-no" title="statement not covered" >  }</span>
&nbsp;
  // ==========================================================================
  // Mutation Rate Management (Sleep Drive &amp; Energy Recovery)
  // ==========================================================================
&nbsp;
  /**
   * Update sleep drive and energy recovery mutation rates.
   * Uses the new setMutationRate API to register rates with StateMutatorSystem.
   */
  private <span class="fstat-no" title="function not covered" >updateSleepMutations(</span>
<span class="cstat-no" title="statement not covered" >    entity: Entity,</span>
<span class="cstat-no" title="statement not covered" >    circadian: CircadianComponent,</span>
<span class="cstat-no" title="statement not covered" >    needs: NeedsComponent,</span>
<span class="cstat-no" title="statement not covered" >    timeOfDay: number</span>
<span class="cstat-no" title="statement not covered" >  ): void {</span>
    // Set mutation rates based on sleep state
<span class="cstat-no" title="statement not covered" >    if (circadian.isSleeping) {</span>
      // Sleeping: deplete sleep drive
      // Rate: -17/hour = -17/3600 = -0.00472 per second
<span class="cstat-no" title="statement not covered" >      const sleepDriveRatePerSecond = -17 / 3600;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >      setMutationRate(entity, 'circadian.sleepDrive', sleepDriveRatePerSecond, {</span>
<span class="cstat-no" title="statement not covered" >        min: 0,</span>
<span class="cstat-no" title="statement not covered" >        max: 100,</span>
<span class="cstat-no" title="statement not covered" >        source: 'sleep_drive_depletion',</span>
<span class="cstat-no" title="statement not covered" >      });</span>
&nbsp;
      // Register energy recovery (only when sleeping)
<span class="cstat-no" title="statement not covered" >      const sleepQuality = circadian.sleepQuality || 0.5;</span>
      // Base recovery: 0.1 per game hour (10% energy per hour)
      // Convert to per-second: 0.1 / 3600 = 0.0000278 per second
<span class="cstat-no" title="statement not covered" >      const energyRecoveryPerSecond = 0.1 * sleepQuality / 3600;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >      setMutationRate(entity, 'needs.energy', energyRecoveryPerSecond, {</span>
<span class="cstat-no" title="statement not covered" >        min: 0,</span>
<span class="cstat-no" title="statement not covered" >        max: 1.0,</span>
<span class="cstat-no" title="statement not covered" >        source: 'sleep_energy_recovery',</span>
<span class="cstat-no" title="statement not covered" >      });</span>
<span class="cstat-no" title="statement not covered" >    } else {</span>
      // Awake: accumulate sleep drive
      // Base rate: 5.5/hour
<span class="cstat-no" title="statement not covered" >      let ratePerHour = 5.5;</span>
&nbsp;
      // Faster accumulation at night (biological circadian pressure)
<span class="cstat-no" title="statement not covered" >      if (timeOfDay &gt;= circadian.preferredSleepTime || timeOfDay &lt; 5) {</span>
<span class="cstat-no" title="statement not covered" >        ratePerHour *= 1.2; // 6.6/hour</span>
<span class="cstat-no" title="statement not covered" >      }</span>
&nbsp;
      // Modified by energy level (low energy = higher sleep drive)
<span class="cstat-no" title="statement not covered" >      if (needs.energy &lt; 0.3) {</span>
<span class="cstat-no" title="statement not covered" >        ratePerHour *= 1.5; // 8.25/hour base, 9.9/hour at night</span>
<span class="cstat-no" title="statement not covered" >      } else if (needs.energy &lt; 0.5) {</span>
<span class="cstat-no" title="statement not covered" >        ratePerHour *= 1.25; // 6.875/hour base, 8.25/hour at night</span>
<span class="cstat-no" title="statement not covered" >      }</span>
&nbsp;
      // Convert to per-second (3600 seconds = 1 game hour)
<span class="cstat-no" title="statement not covered" >      const sleepDriveRatePerSecond = ratePerHour / 3600;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >      setMutationRate(entity, 'circadian.sleepDrive', sleepDriveRatePerSecond, {</span>
<span class="cstat-no" title="statement not covered" >        min: 0,</span>
<span class="cstat-no" title="statement not covered" >        max: 100,</span>
<span class="cstat-no" title="statement not covered" >        source: 'sleep_drive_accumulation',</span>
<span class="cstat-no" title="statement not covered" >      });</span>
&nbsp;
      // Clear energy recovery mutation when awake
<span class="cstat-no" title="statement not covered" >      clearMutationRate(entity, 'needs.energy');</span>
<span class="cstat-no" title="statement not covered" >    }</span>
<span class="cstat-no" title="statement not covered" >  }</span>
&nbsp;
  // ==========================================================================
  // Sleep Processing (Discrete Events)
  // ==========================================================================
&nbsp;
  /**
   * Process sleep: handle discrete events like dreams and wake checks
   * (Energy recovery is now handled by StateMutatorSystem deltas)
   */
  private <span class="fstat-no" title="function not covered" >processSleep(</span>
<span class="cstat-no" title="statement not covered" >    entity: EntityImpl,</span>
<span class="cstat-no" title="statement not covered" >    circadian: CircadianComponent,</span>
<span class="cstat-no" title="statement not covered" >    needs: NeedsComponent,</span>
<span class="cstat-no" title="statement not covered" >    hoursElapsed: number,</span>
<span class="cstat-no" title="statement not covered" >    world: World</span>
<span class="cstat-no" title="statement not covered" >  ): void {</span>
    // Energy recovery is now handled by StateMutatorSystem deltas
    // This method only handles discrete events
&nbsp;
    // Track accumulated sleep duration in game hours
<span class="cstat-no" title="statement not covered" >    circadian.sleepDurationHours = circadian.sleepDurationHours + hoursElapsed;</span>
&nbsp;
    // Update circadian sleepQuality dynamically based on conditions
<span class="cstat-no" title="statement not covered" >    const sleepQuality = circadian.sleepQuality || 0.5;</span>
<span class="cstat-no" title="statement not covered" >    const updatedQuality = this.calculateSleepQuality(entity, circadian, world);</span>
<span class="cstat-no" title="statement not covered" >    if (Math.abs(updatedQuality - sleepQuality) &gt; 0.05) {</span>
      // Only update if significant change (mutable property)
<span class="cstat-no" title="statement not covered" >      circadian.sleepQuality = updatedQuality;</span>
<span class="cstat-no" title="statement not covered" >    }</span>
&nbsp;
    // Generate dream during REM sleep (after 2+ hours, once per sleep)
<span class="cstat-no" title="statement not covered" >    if (!circadian.hasDreamedThisSleep &amp;&amp; circadian.sleepDurationHours &gt;= 2) {</span>
<span class="cstat-no" title="statement not covered" >      this.generateDream(entity, circadian, world);</span>
<span class="cstat-no" title="statement not covered" >    }</span>
&nbsp;
    // Check wake conditions
<span class="cstat-no" title="statement not covered" >    if (this.shouldWake(entity, circadian, needs, world.tick)) {</span>
<span class="cstat-no" title="statement not covered" >      this.wakeAgent(entity, circadian, world);</span>
<span class="cstat-no" title="statement not covered" >    }</span>
<span class="cstat-no" title="statement not covered" >  }</span>
&nbsp;
  /**
   * Calculate sleep quality based on location, building harmony, and environment.
   * Harmonious buildings provide better rest quality.
   */
  private <span class="fstat-no" title="function not covered" >calculateSleepQuality(</span>
<span class="cstat-no" title="statement not covered" >    entity: EntityImpl,</span>
<span class="cstat-no" title="statement not covered" >    circadian: CircadianComponent,</span>
<span class="cstat-no" title="statement not covered" >    world: World</span>
<span class="cstat-no" title="statement not covered" >  ): number {</span>
<span class="cstat-no" title="statement not covered" >    let quality = 0.5; // Base quality (ground)</span>
&nbsp;
    // Location bonuses
<span class="cstat-no" title="statement not covered" >    if (circadian.sleepLocationId) {</span>
      // Look up the sleep location entity by ID
<span class="cstat-no" title="statement not covered" >      const sleepLocation = world.getEntity(circadian.sleepLocationId);</span>
<span class="cstat-no" title="statement not covered" >      if (sleepLocation) {</span>
        // Check if sleeping in a bed or building
<span class="cstat-no" title="statement not covered" >        const buildingComp = getBuilding(sleepLocation);</span>
<span class="cstat-no" title="statement not covered" >        if (buildingComp) {</span>
<span class="cstat-no" title="statement not covered" >          if (buildingComp.buildingType === BT.Bed) {</span>
<span class="cstat-no" title="statement not covered" >            quality += 0.4; // Bed: 0.9 total</span>
<span class="cstat-no" title="statement not covered" >          } else if (buildingComp.buildingType === BT.Bedroll) {</span>
<span class="cstat-no" title="statement not covered" >            quality += 0.2; // Bedroll: 0.7 total</span>
<span class="cstat-no" title="statement not covered" >          } else {</span>
<span class="cstat-no" title="statement not covered" >            quality += 0.1; // Other building: 0.6 total</span>
<span class="cstat-no" title="statement not covered" >          }</span>
&nbsp;
          // Building harmony affects rest quality
          // A harmonious space improves sleep, a discordant one disrupts it
<span class="cstat-no" title="statement not covered" >          const sleepBuilding = sleepLocation as EntityImpl;</span>
<span class="cstat-no" title="statement not covered" >          const harmony = sleepBuilding.getComponent&lt;BuildingHarmonyComponent&gt;(CT.BuildingHarmony);</span>
<span class="cstat-no" title="statement not covered" >          if (harmony) {</span>
            // getHarmonyRestModifier returns -0.75 to +0.75
            // Scale it down to -0.3 to +0.3 for sleep quality impact
<span class="cstat-no" title="statement not covered" >            const harmonyBonus = getHarmonyRestModifier(harmony.harmonyScore) * 0.4;</span>
<span class="cstat-no" title="statement not covered" >            quality += harmonyBonus;</span>
<span class="cstat-no" title="statement not covered" >          }</span>
<span class="cstat-no" title="statement not covered" >        }</span>
<span class="cstat-no" title="statement not covered" >      }</span>
<span class="cstat-no" title="statement not covered" >    }</span>
&nbsp;
    // Environmental penalties
<span class="cstat-no" title="statement not covered" >    const needs = getNeeds(entity);</span>
<span class="cstat-no" title="statement not covered" >    if (needs) {</span>
      // Temperature penalties (if we had temperature on needs)
      // Note: Current NeedsComponent doesn't have temperature field
      // This would need to be integrated with TemperatureSystem
<span class="cstat-no" title="statement not covered" >    }</span>
&nbsp;
    // Clamp to valid range (0.1 to 1.0)
<span class="cstat-no" title="statement not covered" >    return Math.max(0.1, Math.min(1.0, quality));</span>
<span class="cstat-no" title="statement not covered" >  }</span>
&nbsp;
  /**
   * Check if agent should wake up
   * NOTE: Sleep duration is tracked in GAME HOURS by SleepSystem.processSleep via hoursElapsed accumulation,
   * not in real-time ticks. We use circadian.sleepDurationHours.
   */
  private <span class="fstat-no" title="function not covered" >shouldWake(</span>
<span class="cstat-no" title="statement not covered" >    _entity: EntityImpl,</span>
<span class="cstat-no" title="statement not covered" >    circadian: CircadianComponent,</span>
<span class="cstat-no" title="statement not covered" >    needs: NeedsComponent,</span>
<span class="cstat-no" title="statement not covered" >    _currentTick: number</span>
<span class="cstat-no" title="statement not covered" >  ): boolean {</span>
<span class="cstat-no" title="statement not covered" >    if (!circadian.isSleeping || circadian.sleepStartTime === null) {</span>
<span class="cstat-no" title="statement not covered" >      return false;</span>
<span class="cstat-no" title="statement not covered" >    }</span>
&nbsp;
    // Get accumulated sleep duration from circadian component (in game hours)
    // This is updated by processSleep each frame
<span class="cstat-no" title="statement not covered" >    const hoursAsleep = circadian.sleepDurationHours;</span>
&nbsp;
    // Minimum sleep duration: 4 game hours
<span class="cstat-no" title="statement not covered" >    if (hoursAsleep &lt; 4) {</span>
      // Only wake for critical hunger (not energy - agent needs to recover!)
      // NeedsComponent uses 0-1 scale (0.1 = 10%)
<span class="cstat-no" title="statement not covered" >      if (needs.hunger &lt; 0.1) {</span>
<span class="cstat-no" title="statement not covered" >        return true; // Critical hunger overrides minimum sleep</span>
<span class="cstat-no" title="statement not covered" >      }</span>
<span class="cstat-no" title="statement not covered" >      return false;</span>
<span class="cstat-no" title="statement not covered" >    }</span>
&nbsp;
    // Wake conditions (prioritize full energy recovery):
    // NeedsComponent uses 0-1 scale (1.0 = 100%, 0.1 = 10%)
    // 1. Energy fully restored (100%) - primary wake condition
<span class="cstat-no" title="statement not covered" >    const energyFull = needs.energy &gt;= 1.0;</span>
&nbsp;
    // 2. Urgent hunger (&lt; 10%) - emergency wake
<span class="cstat-no" title="statement not covered" >    const urgentNeed = needs.hunger &lt; 0.1;</span>
&nbsp;
    // 3. Maximum sleep duration reached (12 hours - prevent oversleeping)
<span class="cstat-no" title="statement not covered" >    const maxSleepReached = hoursAsleep &gt;= 12;</span>
&nbsp;
    // Note: Removed "wellRestedAndSatisfied" (70% energy + sleepDrive &lt; 10) condition
    // User requested agents wake at 100% energy, not 70%
<span class="cstat-no" title="statement not covered" >    return energyFull || urgentNeed || maxSleepReached;</span>
<span class="cstat-no" title="statement not covered" >  }</span>
&nbsp;
  /**
   * Wake agent from sleep
   */
  private <span class="fstat-no" title="function not covered" >wakeAgent(</span>
<span class="cstat-no" title="statement not covered" >    entity: EntityImpl,</span>
<span class="cstat-no" title="statement not covered" >    circadian: CircadianComponent,</span>
<span class="cstat-no" title="statement not covered" >    world: World</span>
<span class="cstat-no" title="statement not covered" >  ): void {</span>
    // Update circadian component by mutating properties
<span class="cstat-no" title="statement not covered" >    circadian.isSleeping = false;</span>
<span class="cstat-no" title="statement not covered" >    circadian.lastSleepLocationId = circadian.sleepLocationId;</span>
<span class="cstat-no" title="statement not covered" >    circadian.sleepLocationId = null;</span>
<span class="cstat-no" title="statement not covered" >    circadian.sleepStartTime = null;</span>
<span class="cstat-no" title="statement not covered" >    circadian.sleepDurationHours = 0; // Reset sleep duration counter</span>
&nbsp;
    // Update agent behavior (switch from sleeping to wandering)
<span class="cstat-no" title="statement not covered" >    const agent = getAgent(entity);</span>
<span class="cstat-no" title="statement not covered" >    if (agent &amp;&amp; (agent.behavior === 'seek_sleep' || agent.behavior === 'forced_sleep')) {</span>
<span class="cstat-no" title="statement not covered" >      entity.updateComponent&lt;AgentComponent&gt;(CT.Agent, (current) =&gt; ({</span>
<span class="cstat-no" title="statement not covered" >        ...current,</span>
<span class="cstat-no" title="statement not covered" >        behavior: 'wander',</span>
<span class="cstat-no" title="statement not covered" >        behaviorState: {},</span>
<span class="cstat-no" title="statement not covered" >      }));</span>
<span class="cstat-no" title="statement not covered" >    }</span>
&nbsp;
    // Emit wake event
<span class="cstat-no" title="statement not covered" >    this.events.emit('agent:woke', {</span>
<span class="cstat-no" title="statement not covered" >      agentId: entity.id,</span>
<span class="cstat-no" title="statement not covered" >    }, entity.id);</span>
<span class="cstat-no" title="statement not covered" >  }</span>
&nbsp;
  /**
   * Generate a dream based on memories and emotions
   */
  private <span class="fstat-no" title="function not covered" >generateDream(</span>
<span class="cstat-no" title="statement not covered" >    entity: EntityImpl,</span>
<span class="cstat-no" title="statement not covered" >    circadian: CircadianComponent,</span>
<span class="cstat-no" title="statement not covered" >    world: World</span>
<span class="cstat-no" title="statement not covered" >  ): void {</span>
<span class="cstat-no" title="statement not covered" >    const memComp = getEpisodicMemory(entity);</span>
<span class="cstat-no" title="statement not covered" >    const memoryElements: string[] = [];</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    if (memComp &amp;&amp; memComp.episodicMemories.length &gt; 0) {</span>
      // Get recent and emotional memories (last 10, sorted by recency and emotion)
<span class="cstat-no" title="statement not covered" >      const memories = [...memComp.episodicMemories]</span>
<span class="cstat-no" title="statement not covered" >        .sort((a: EpisodicMemory, b: EpisodicMemory) =&gt; {</span>
<span class="cstat-no" title="statement not covered" >          const aScore = (world.tick - a.timestamp) / 1000 + a.emotionalIntensity * 500;</span>
<span class="cstat-no" title="statement not covered" >          const bScore = (world.tick - b.timestamp) / 1000 + b.emotionalIntensity * 500;</span>
<span class="cstat-no" title="statement not covered" >          return bScore - aScore; // Higher score = more recent or emotional</span>
<span class="cstat-no" title="statement not covered" >        })</span>
<span class="cstat-no" title="statement not covered" >        .slice(0, 10);</span>
&nbsp;
      // Extract 2-4 memory elements from summaries
<span class="cstat-no" title="statement not covered" >      const numElements = Math.min(memories.length, 2 + Math.floor(Math.random() * 3));</span>
<span class="cstat-no" title="statement not covered" >      for (let i = 0; i &lt; numElements; i++) {</span>
<span class="cstat-no" title="statement not covered" >        const memory = memories[i];</span>
<span class="cstat-no" title="statement not covered" >        if (memory &amp;&amp; memory.summary) {</span>
<span class="cstat-no" title="statement not covered" >          memoryElements.push(memory.summary);</span>
<span class="cstat-no" title="statement not covered" >        }</span>
<span class="cstat-no" title="statement not covered" >      }</span>
<span class="cstat-no" title="statement not covered" >    }</span>
&nbsp;
    // Pick a random weird element
<span class="cstat-no" title="statement not covered" >    const weirdElementIndex = Math.floor(Math.random() * WEIRD_DREAM_ELEMENTS.length);</span>
<span class="cstat-no" title="statement not covered" >    const weirdElement = WEIRD_DREAM_ELEMENTS[weirdElementIndex];</span>
<span class="cstat-no" title="statement not covered" >    if (!weirdElement) {</span>
<span class="cstat-no" title="statement not covered" >      throw new Error('Failed to select weird dream element');</span>
<span class="cstat-no" title="statement not covered" >    }</span>
&nbsp;
    // Construct dream narrative
<span class="cstat-no" title="statement not covered" >    let dreamNarrative = 'You had a strange dream. ';</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    if (memoryElements.length &gt; 0) {</span>
<span class="cstat-no" title="statement not covered" >      dreamNarrative += memoryElements.join(', and then ');</span>
<span class="cstat-no" title="statement not covered" >      dreamNarrative += ', but ' + weirdElement + '.';</span>
<span class="cstat-no" title="statement not covered" >    } else {</span>
<span class="cstat-no" title="statement not covered" >      dreamNarrative += 'You were wandering around, but ' + weirdElement + '.';</span>
<span class="cstat-no" title="statement not covered" >    }</span>
&nbsp;
    // Generate simple interpretation
<span class="cstat-no" title="statement not covered" >    const interpretations = [</span>
<span class="cstat-no" title="statement not covered" >      'I wonder what that dream meant...',</span>
<span class="cstat-no" title="statement not covered" >      'That was a weird dream. Maybe it means something?',</span>
<span class="cstat-no" title="statement not covered" >      'Strange dream. I should think about what it could mean.',</span>
<span class="cstat-no" title="statement not covered" >      'What an odd dream. I\'m not sure what to make of it.',</span>
<span class="cstat-no" title="statement not covered" >      'That dream felt significant somehow.',</span>
<span class="cstat-no" title="statement not covered" >      'I had the strangest dream last night.',</span>
<span class="cstat-no" title="statement not covered" >      'I keep thinking about that bizarre dream.',</span>
<span class="cstat-no" title="statement not covered" >    ];</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    const interpretationIndex = Math.floor(Math.random() * interpretations.length);</span>
<span class="cstat-no" title="statement not covered" >    const interpretation = interpretations[interpretationIndex];</span>
<span class="cstat-no" title="statement not covered" >    if (!interpretation) {</span>
<span class="cstat-no" title="statement not covered" >      throw new Error('Failed to generate dream interpretation');</span>
<span class="cstat-no" title="statement not covered" >    }</span>
&nbsp;
    // Create dream content object
<span class="cstat-no" title="statement not covered" >    const dreamContent: DreamContent = {</span>
<span class="cstat-no" title="statement not covered" >      memoryElements,</span>
<span class="cstat-no" title="statement not covered" >      weirdElement,</span>
<span class="cstat-no" title="statement not covered" >      dreamNarrative,</span>
<span class="cstat-no" title="statement not covered" >      interpretation,</span>
<span class="cstat-no" title="statement not covered" >    };</span>
&nbsp;
    // Update circadian with dream (mutable properties)
<span class="cstat-no" title="statement not covered" >    circadian.lastDream = dreamContent;</span>
<span class="cstat-no" title="statement not covered" >    circadian.hasDreamedThisSleep = true;</span>
&nbsp;
    // Emit dream event
<span class="cstat-no" title="statement not covered" >    this.events.emit('agent:dreamed', {</span>
<span class="cstat-no" title="statement not covered" >      agentId: entity.id,</span>
<span class="cstat-no" title="statement not covered" >      dreamContent: dreamNarrative,</span>
<span class="cstat-no" title="statement not covered" >      entityId: entity.id,</span>
<span class="cstat-no" title="statement not covered" >    }, entity.id);</span>
<span class="cstat-no" title="statement not covered" >  }</span>
&nbsp;
}
&nbsp;</pre></td></tr></table></pre>

                <div class='push'></div><!-- for sticky footer -->
            </div><!-- /wrapper -->
            <div class='footer quiet pad2 space-top1 center small'>
                Code coverage generated by
                <a href="https://istanbul.js.org/" target="_blank" rel="noopener noreferrer">istanbul</a>
                at 2026-01-24T07:39:11.283Z
            </div>
        <script src="../../../../../prettify.js"></script>
        <script>
            window.onload = function () {
                prettyPrint();
            };
        </script>
        <script src="../../../../../sorter.js"></script>
        <script src="../../../../../block-navigation.js"></script>
    </body>
</html>
    