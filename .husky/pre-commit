#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ” Running data validators..."

cd custom_game_engine

# Install glob if not already installed (needed for validators)
if ! npm list glob > /dev/null 2>&1; then
  echo "ğŸ“¦ Installing glob dependency..."
  npm install --save-dev glob --silent
fi

# Run validators
npm run validate-data

# Check exit code
if [ $? -ne 0 ]; then
  echo "âŒ Validation failed. Please fix errors before committing."
  exit 1
fi

echo "âœ… All validations passed!"
